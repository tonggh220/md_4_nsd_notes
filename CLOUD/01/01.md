# 云计算基础 -- 虚拟化技术

常用虚拟化技术
  vmware（收费，企业版 esxi ）
  https://www.proxmox.com/en/proxmox-ve
  redhat kvm rhev

## 虚拟化平台安装

查看是否支持虚拟化

```shell 
[root@room9pc119 ~]# grep -P "vmx|svm" /proc/cpuinfo
flags		: ... ... vmx
[root@room9pc119 ~]# lsmod |grep kvm
kvm_intel             174841  6 
kvm                   578518  1 kvm_intel
irqbypass              13503  1 kvm
```

创建虚拟机 2cpu，4G内存（base-vm.zip 模板的默认用户名: root  密码: a）
配置 yum 源，安装 libvirt 软件
1、把 CentOS-7.5-1804.iso 加载到虚拟机的光驱里
2、虚拟机里面 mount 该 iso 到 /var/centos-1804
3、配置 yum 源

```shell
[CentOS-Base]
name=CentOS-$releasever - Base
baseurl="file:///var/centos-1804"
enabled=1
gpgcheck=0
```

4、安装 libvirtd

```shell
[root@localhost ~]# yum install qemu-kvm libvirt-daemon libvirt-client libvirt-daemon-driver-qemu
[root@localhost ~]# systemctl enable --now libvirtd
[root@localhost ~]# virsh version
```

**虚拟机组成**
​    硬盘文件  /var/lib/libvirt/images/
​    配置文件  /etc/libvirt/qemu/

#### 实验虚拟化图例

```mermaid
graph TB
  subgraph <font color=#ff0000>windows/真机</font>
      subgraph linux
        style linux color:#ff0000,fill:#11aaff
        H1(虚拟机1) --> B{{虚拟网桥 <font color=#ff0000>vbr</font>}} --> E[eth0]
        H2(虚拟机2) --> B
        H3(虚拟机3) --> B
      end
      E --> W(vmnet 设备)
  end
```

## 虚拟机硬盘磁盘文件

qemu-img  子命令  子命令参数  虚拟机磁盘文件  大小

```shell
[root@localhost ~]# cp cirros.qcow2 /var/lib/libvirt/images/
[root@localhost ~]# cd /var/lib/libvirt/images/
[root@localhost ~]# qemu-img create -f qcow2 -b cirros.qcow2 vmhost.img 30G
[root@localhost ~]# qemu-img info vmhost.img #查看信息
```







## 虚拟机配置文件





## 虚拟网络配置



## 虚拟机管理



# 公有云简介

## xshell 使用技巧

使用 lrzsz 上传下载文件

安装软件 

```shell
[root@localhost ~]# yum install lrzsz
```

配置 xshell 激活 zmodem

退出重新登录以后，即可上传（rz）下载（sz）